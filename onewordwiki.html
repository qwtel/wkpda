<head>
  <title>The World According to Popular Search Queries</title>
</head>

<body>
  {{> body}}
</body>

<template name="body">
  <center>
  <h1><a href="/">The World According to Popular Search Queries</a></h1>
  {{> form}}
  </center>

  {{#if equals "page" "thing"}}
    {{> properties}}
  {{else}}
    {{#if equals "page" "property"}}
      {{> things}}
    {{else}}
      {{> popular}}
    {{/if}}
  {{/if}}
</template>

<template name="popular">
  <h2>Why not try...</h2>
  <ul>
  {{#each things}}
    <li>{{> thing}}</li>
  {{/each}}
  </ul>
</template>

<template name="form">
  <div class="form-inline">
    <input id="thing" class="input-xlarge" type="text" value="{{thing}}" placeholder="Something"/>
    <select id="verb" class="input-small">
      <option "{{verb "is"}}">is</option>
      <option "{{verb "are"}}">are</option>
    </select>
    <button class="btn" type="button">What?</button>
  </div>
</template>

<template name="properties">
  {{#with thingObject}}
  {{#each images}}
      <div class="media-img media-object" style="float:left; margin-right: 10px; background-image: url('{{.}}')"></div>
  {{/each}}
  {{/with}}
  <div class="clearfix"/>

  <h1>&raquo;{{thing}}&laquo; {{verb}}...</h1>
  <br/>

  <ul>
  {{#each properties}}
    <li>{{> property}}</li>
  {{/each}}
  </ul>
</template>

<template name="things">
  {{#with propertyObject}}
  {{#each images}}
      <div class="media-img bubble media-object" style="float:left; margin-right: 10px; background-image: url('{{.}}')"></div>
  {{/each}}
  {{/with}}
  <div class="clearfix"/>

  <h1>Things that are "{{property}}"...</h1>
  <br/>

  <ul>
  {{#each things}}
    <li>{{> thing}}</li>
  {{/each}}
  </ul>
</template>

<template name="thing">
  <div class="thing media">
    <a href="/thing/{{_id}}" class="pull-left">
      <div class="media-img media-object" style="background-image: url('{{image}}')"></div>
    </a>
    <div class="media-body">
      <h2 class="media-heading">
        <a href="/thing/{{_id}}">{{text}}</a>
      </h2>
      <p>...</p>
    </div>
  </div>
</template>

<template name="property">
  <div class="property media">
    <a href="/property/{{_id}}" class="pull-left">
      <div class="media-img media-object" style="background-image: url('{{image}}')"></div>
    </a>
    <div class="media-body">
      <h2 class="media-heading">
        <a href="/property/{{_id}}">{{text}}</a>
      </h2>
      {{#if gt0}}
        <p>{{thingsCount}}</p>
      {{/if}}
    </div>
  </div>
  <!--<a href="https://www.google.at/search?q={{q}}" target="_blank">Search</a>-->
</template>
